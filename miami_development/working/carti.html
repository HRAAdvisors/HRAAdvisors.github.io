<html><head>
    <meta charset="utf-8">
    <title>Miami DDA 3D Buildings</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet">
    <link href="style/mapboxoverride.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&amp;display=swap" rel="stylesheet">
    <link href="style/dda.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body data-new-gr-c-s-check-loaded="14.998.0" data-gr-ext-installed="" class="vsc-initialized">
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.min.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.css" type="text/css">
    <div id="menu" class="mobilehide">
        <div id="classabutton" class="on bordertop"><img src="style/classa.svg" height="20px" width="20px" style="vertical-align:middle"> Class A Offices (&gt;50K SF)</div>
        <div id="otherbutton" class="on"><img src="style/other.svg" height="20px" width="20px" style="vertical-align:middle"> Non-Class A Offices (&gt;50K SF)</div>
        <div id="condobutton" class="on"><img src="style/condo.svg" height="20px" width="20px" style="vertical-align:middle"> Condominium Properties</div>
        <div id="rentalbutton" class="on"><img src="style/rental.svg" height="20px" width="20px" style="vertical-align:middle"> Rental Apartment Properties</div>
        <div id="hotelbutton" class="on"><img src="style/hotel.svg" height="20px" width="20px" style="vertical-align:middle"> Hotels</div>
        <div id="shoppingbutton" class="on"><img src="style/shopping.svg" height="20px" width="20px" style="vertical-align:middle"> Shopping Centers</div>
        <div class="img-container"><img src="style/otherkey.jpg" width="200">
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>
    <div id="map" class="mapboxgl-map"><div class="mapboxgl-canary" style="visibility: hidden;"></div><div class="mapboxgl-canvas-container mapboxgl-interactive mapboxgl-touch-drag-pan mapboxgl-touch-zoom-rotate"><canvas class="mapboxgl-canvas" tabindex="0" aria-label="Map" width="1920" height="1009" style="width: 1920px; height: 1009px;"></canvas></div><div class="mapboxgl-control-container"><div class="mapboxgl-ctrl-top-left"></div><div class="mapboxgl-ctrl-top-right"><div class="mapboxgl-ctrl-geocoder mapboxgl-ctrl"><svg class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search" viewBox="0 0 18 18" xml:space="preserve" width="18" height="18"><path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"></path></svg><input type="text" class="mapboxgl-ctrl-geocoder--input" placeholder="Search" aria-label="Search"><div class="suggestions-wrapper"><ul class="suggestions" style="display: none;"></ul></div><div class="mapboxgl-ctrl-geocoder--pin-right"><button aria-label="Clear" class="mapboxgl-ctrl-geocoder--button"><svg class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-close" viewBox="0 0 18 18" xml:space="preserve" width="18" height="18"><path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"></path></svg></button><svg class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-loading" viewBox="0 0 18 18" xml:space="preserve" width="18" height="18"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg></div></div></div><div class="mapboxgl-ctrl-bottom-left"><div class="mapboxgl-ctrl" style="display: block;"><a class="mapboxgl-ctrl-logo" target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo"></a></div></div><div class="mapboxgl-ctrl-bottom-right"><div class="mapboxgl-ctrl mapboxgl-ctrl-attrib"><div class="mapboxgl-ctrl-attrib-inner"><a href="https://www.mapbox.com/about/maps/" target="_blank">© Mapbox</a> <a href="http://www.openstreetmap.org/about/" target="_blank">© OpenStreetMap</a> <a class="mapbox-improve-map" href="https://apps.mapbox.com/feedback/?owner=mddacartifact&amp;id=ckedanrsi0cqo19o8uom16pza&amp;access_token=pk.eyJ1IjoibWRkYWNhcnRpZmFjdCIsImEiOiJja2VkYWh4NXgwMXc2MnFwcTd6NHIxZDV4In0.ErKeTGrDA41f5U-RBgvBpQ" target="_blank" rel="noopener nofollow">Improve this map</a></div></div></div></div></div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoibWRkYWNhcnRpZmFjdCIsImEiOiJja2VkYWh4NXgwMXc2MnFwcTd6NHIxZDV4In0.ErKeTGrDA41f5U-RBgvBpQ';
        var bounds = [
[-80.24975, 25.73521]
, [-80.13341, 25.83169]
];
        var map = new mapboxgl.Map({
            container: 'map'
            , style: 'mapbox://styles/mddacartifact/ckedanrsi0cqo19o8uom16pza'
            , center: [-80.19393, 25.77054]
            , zoom: 14.1
            , pitch: 47
            , bearing: -25
            , minZoom: 12.5
            , maxZoom: 16
            , maxBounds: bounds
        });
        map.addControl(new MapboxGeocoder({
            accessToken: mapboxgl.accessToken
            , mapboxgl: mapboxgl
        }));
        // set functions for layer toggle buttons
        map.on('load', function () {

            //console.log(map.getSource('composite'))

            console.log(map.getStyle().layers);

		console.log(map.querySourceFeatures('composite', {
		sourceLayer: 'combinedbuildings-782d1o'
		}))

		console.log(map.querySourceFeatures('composite', {
		sourceLayer: 'miamiresibuildings-cumrhg'
		}))


            //console.log(map.queryRenderedFeatures({layers: ['brightline']}))
            var classatoggle = document.getElementById('classabutton');
            classatoggle.addEventListener('click', function () {
                if (classatoggle.className === 'on bordertop') {
                    classatoggle.setAttribute('class', 'off');
                    map.setLayoutProperty('classa', 'visibility', 'none');
                    map.setLayoutProperty('classa', 'visibility', 'none');
                    classatoggle.className = 'off bordertop';
                }
                else {
                    classatoggle.setAttribute('class', 'on bordertop');
                    map.setLayoutProperty('classa', 'visibility', 'visible');
                    map.setLayoutProperty('classa', 'visibility', 'visible');
                    classatoggle.className = 'on bordertop';
                }
            });
        });


        map.on('load', function () {
            var othertoggle = document.getElementById('otherbutton');
            othertoggle.addEventListener('click', function () {
                if (othertoggle.className === 'on') {
                    othertoggle.setAttribute('class', 'off');
                    map.setLayoutProperty('other', 'visibility', 'none');
                    map.setLayoutProperty('other', 'visibility', 'none');
                    othertoggle.className = 'off';
                }
                else {
                    othertoggle.setAttribute('class', 'on bordertop');
                    map.setLayoutProperty('other', 'visibility', 'visible');
                    map.setLayoutProperty('other', 'visibility', 'visible');
                    othertoggle.className = 'on';
                }
            });
        });
        map.on('load', function () {
            var condotoggle = document.getElementById('condobutton');
            condotoggle.addEventListener('click', function () {
                if (condotoggle.className === 'on') {
                    condotoggle.setAttribute('class', 'off');
                    map.setLayoutProperty('condo', 'visibility', 'none');
                    map.setLayoutProperty('condo', 'visibility', 'none');
                    condotoggle.className = 'off';
                }
                else {
                    condotoggle.setAttribute('class', 'on bordertop');
                    map.setLayoutProperty('condo', 'visibility', 'visible');
                    map.setLayoutProperty('condo', 'visibility', 'visible');
                    condotoggle.className = 'on';
                }
            });
        });
        map.on('load', function () {
            var rentaltoggle = document.getElementById('rentalbutton');
            rentaltoggle.addEventListener('click', function () {
                if (rentaltoggle.className === 'on') {
                    rentaltoggle.setAttribute('class', 'off');
                    map.setLayoutProperty('rental', 'visibility', 'none');
                    map.setLayoutProperty('rental', 'visibility', 'none');
                    rentaltoggle.className = 'off';
                }
                else {
                    rentaltoggle.setAttribute('class', 'on bordertop');
                    map.setLayoutProperty('rental', 'visibility', 'visible');
                    map.setLayoutProperty('rental', 'visibility', 'visible');
                    rentaltoggle.className = 'on';
                }
            });
        });
        map.on('load', function () {
            var hoteltoggle = document.getElementById('hotelbutton');
            hoteltoggle.addEventListener('click', function () {
                if (hoteltoggle.className === 'on') {
                    hoteltoggle.setAttribute('class', 'off');
                    map.setLayoutProperty('hotels', 'visibility', 'none');
                    map.setLayoutProperty('hotels', 'visibility', 'none');
                    hoteltoggle.className = 'off';
                }
                else {
                    hoteltoggle.setAttribute('class', 'on bordertop');
                    map.setLayoutProperty('hotels', 'visibility', 'visible');
                    map.setLayoutProperty('hotels', 'visibility', 'visible');
                    hoteltoggle.className = 'on';
                }
            });
        });
        map.on('load', function () {
            var shoppingtoggle = document.getElementById('shoppingbutton');
            shoppingtoggle.addEventListener('click', function () {
                if (shoppingtoggle.className === 'on') {
                    shoppingtoggle.setAttribute('class', 'off');
                    map.setLayoutProperty('shopping', 'visibility', 'none');
                    map.setLayoutProperty('shopping', 'visibility', 'none');
                    shoppingtoggle.className = 'off';
                }
                else {
                    shoppingtoggle.setAttribute('class', 'on bordertop');
                    map.setLayoutProperty('shopping', 'visibility', 'visible');
                    map.setLayoutProperty('shopping', 'visibility', 'visible');
                    shoppingtoggle.className = 'on';
                }
            });
        });
        // callouts on click
        map.on('load', function () {
            map.on('click', 'classa', function (e) {
                new mapboxgl.Popup().setLngLat(e.lngLat).setHTML('<div class="marker-title">' + e.features[0].properties.name + '</div><div style = "padding-top:5px;"> Stories: <b>' + e.features[0].properties.stories + '</b></div><div> Square Feet: <b>' + e.features[0].properties.sf + '</b></div><div> Leasing Firm: <b>' + e.features[0].properties.leasing + '</b></div><div> Contact: <b>' + e.features[0].properties.contact + '</b></div><div> Phone: <b>' + e.features[0].properties.phone + '</b></div><div> Email: <b>' + e.features[0].properties.email + '</b></div>').setMaxWidth("700px").addTo(map);
            });
            map.on('mouseenter', 'classa', function () {
                map.getCanvas().style.cursor = 'pointer';
            });
            map.on('mouseleave', 'classa', function () {
                map.getCanvas().style.cursor = '';
            });
        });
        map.on('load', function () {
            map.on('click', 'other', function (e) {
                new mapboxgl.Popup().setLngLat(e.lngLat).setHTML('<div class="marker-title">' + e.features[0].properties.name + '</div><div style = "padding-top:5px;"> Stories: <b>' + e.features[0].properties.stories + '</b></div><div> Square Feet: <b>' + e.features[0].properties.sf + '</b></div><div> Leasing Firm: <b>' + e.features[0].properties.leasing + '</b></div><div> Contact: <b>' + e.features[0].properties.contact + '</b></div><div> Phone: <b>' + e.features[0].properties.phone + '</b></div><div> Email: <b>' + e.features[0].properties.email + '</b></div>').setMaxWidth("700px").addTo(map);
            });
            map.on('mouseenter', 'other', function () {
                map.getCanvas().style.cursor = 'pointer';
            });
            map.on('mouseleave', 'other', function () {
                map.getCanvas().style.cursor = '';
            });
        });
        map.on('load', function () {
            map.on('click', 'condo', function (e) {
                new mapboxgl.Popup().setLngLat(e.lngLat).setHTML('<div class="marker-title">' + e.features[0].properties.Name + '</div><div style = "padding-top:5px;"> Stories: <b>' + e.features[0].properties.stories + '</b></div><div> Units: <b>' + e.features[0].properties.units + '</b></div><div> Property Mgmt Co: <b>' + e.features[0].properties.info + '</b></div>').setMaxWidth("700px").addTo(map);
            });
            map.on('mouseenter', 'condo', function () {
                map.getCanvas().style.cursor = 'pointer';
            });
            map.on('mouseleave', 'condo', function () {
                map.getCanvas().style.cursor = '';
            });
        });
        map.on('load', function () {
            map.on('click', 'rental', function (e) {
                new mapboxgl.Popup().setLngLat(e.lngLat).setHTML('<div class="marker-title">' + e.features[0].properties.Name + '</div><div style = "padding-top:5px;"> Stories: <b>' + e.features[0].properties.stories + '</b></div><div> Units: <b>' + e.features[0].properties.units + '</b></div><div> <b><a href="' + e.features[0].properties.info + '" target="_blank">Website</a> </b></div>').setMaxWidth("700px").addTo(map);
            });
            map.on('mouseenter', 'rental', function () {
                map.getCanvas().style.cursor = 'pointer';
            });
            map.on('mouseleave', 'rental', function () {
                map.getCanvas().style.cursor = '';
            });
        });
        map.on('load', function () {
            map.on('click', 'hotels', function (e) {
                new mapboxgl.Popup().setLngLat(e.lngLat).setHTML('<div class="marker-title">' + e.features[0].properties.Name + '</div><div style = "padding-top:5px;"> Hotel Meeting Space: <b>' + e.features[0].properties.Hotel_Meet + '</b></div><div> Hotel Rooms: <b>' + e.features[0].properties.Hotel_Room + '</b></div><div>' + e.features[0].properties.website + '</div>').setMaxWidth("700px").addTo(map);
            });
            map.on('mouseenter', 'hotels', function () {
                map.getCanvas().style.cursor = 'pointer';
            });
            map.on('mouseleave', 'hotels', function () {
                map.getCanvas().style.cursor = '';
            });
        });
        map.on('load', function () {
            map.on('click', 'shopping', function (e) {
                new mapboxgl.Popup().setLngLat(e.lngLat).setHTML('<div class="marker-title">' + e.features[0].properties.Name + '</div><div style = "padding-top:5px;">' + e.features[0].properties.website + '</div>').setMaxWidth("700px").addTo(map);
            });
            map.on('mouseenter', 'shopping', function () {
                map.getCanvas().style.cursor = 'pointer';
            });
            map.on('mouseleave', 'shopping', function () {
                map.getCanvas().style.cursor = '';
            });
        });
        // station names on hover
        var popup = new mapboxgl.Popup({
            closeButton: false
            , closeOnClick: false
        });
        map.on('mouseenter', 'metromover-stops', function (e) {
            // Change the cursor style as a UI indicator.
            map.getCanvas().style.cursor = 'pointer';
            var coordinates = e.features[0].geometry.coordinates.slice();
            var description = e.features[0].properties.NAME;
            while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
            }
            popup.setLngLat(coordinates).setHTML('<i>' + description + '</i>').addTo(map);
        });
        map.on('mouseleave', 'metromover-stops', function () {
            map.getCanvas().style.cursor = '';
            popup.remove();
        });
    </script>


</body></html>